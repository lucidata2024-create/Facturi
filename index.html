<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LuciDataFact â€” EvidenÈ›a Facturilor</title>
  <meta name="description" content="LuciDataFact" />
  <link rel="stylesheet" href="lucidatafact.css" />
</head>

<body>
  <div class="app">
    <!-- TOPBAR -->
    <header class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true">ğŸ“„</div>
        <div>
          <h1>LuciDataFact</h1>
          <div class="sub">EvidenÈ›a facturilor Â· notificÄƒri Â· Ã®ncasÄƒri</div>
        </div>
      </div>

      <div class="top-actions">
        <button class="btn" id="btnAddInvoice">â• FacturÄƒ</button>
        <button class="btn" id="btnAddCategory">ğŸ·ï¸ Categorie</button>
        <button class="btn" id="btnEnableNotifs">ğŸ”” NotificÄƒri</button>

        <div class="sep"></div>

        <button class="btn" id="btnExport">â¬‡ï¸ Export</button>
        <label class="btn btn-file" for="importFile">â¬†ï¸ Import</label>
        <input type="file" id="importFile" accept="application/json" hidden />
        <button class="btn btn-ghost" id="btnReset">â™»ï¸ Reset</button>
      </div>
    </header>

    <!-- KPI -->
    <section class="kpis" aria-label="Indicatori">
      <div class="kpi">
        <div class="kpi-title">NeÃ®ncasate</div>
        <div class="kpi-value" id="kpiUnpaid">0</div>
        <div class="kpi-sub" id="kpiUnpaidSum">0 RON</div>
      </div>

      <div class="kpi">
        <div class="kpi-title">De trimis azi</div>
        <div class="kpi-value" id="kpiToSendToday">0</div>
        <div class="kpi-sub">Facturi cu trimitere programatÄƒ azi</div>
      </div>

      <div class="kpi">
        <div class="kpi-title">Scadente (7 zile)</div>
        <div class="kpi-value" id="kpiDueSoon">0</div>
        <div class="kpi-sub">ScadenÈ›Äƒ Ã®n urmÄƒtoarele 7 zile</div>
      </div>

      <div class="kpi">
        <div class="kpi-title">ÃntÃ¢rziate</div>
        <div class="kpi-value" id="kpiOverdue">0</div>
        <div class="kpi-sub">NeplÄƒtite dupÄƒ scadenÈ›Äƒ</div>
      </div>
    </section>

    <!-- FILTERS -->
    <section class="panel filters" aria-label="Filtre">
      <div class="row">
        <div class="field grow">
          <label for="search">CÄƒutare</label>
          <input id="search" type="search" placeholder="CautÄƒ dupÄƒ client, numÄƒr facturÄƒ, magazin, locaÈ›ie..." />
        </div>

        <div class="field">
          <label for="filterStatus">Status</label>
          <select id="filterStatus">
            <option value="all">Toate</option>
            <option value="unpaid">NeplÄƒtite</option>
            <option value="paid">PlÄƒtite</option>
            <option value="unsent">Netrimise</option>
            <option value="sent">Trimise</option>
            <option value="overdue">ÃntÃ¢rziate</option>
          </select>
        </div>

        <div class="field">
          <label for="filterShop">Magazin</label>
          <select id="filterShop">
            <option value="all">Toate</option>
          </select>
        </div>

        <div class="field">
          <label for="filterLocation">LocaÈ›ie</label>
          <select id="filterLocation">
            <option value="all">Toate</option>
          </select>
        </div>

        <div class="field">
          <label for="sortBy">Sortare</label>
          <select id="sortBy">
            <option value="sendDate_asc">Trimitere â†‘</option>
            <option value="sendDate_desc">Trimitere â†“</option>
            <option value="dueDate_asc">ScadenÈ›Äƒ â†‘</option>
            <option value="dueDate_desc">ScadenÈ›Äƒ â†“</option>
            <option value="issueDate_desc">Emitere â†“</option>
            <option value="amount_desc">SumÄƒ â†“</option>
            <option value="amount_asc">SumÄƒ â†‘</option>
          </select>
        </div>

        <div class="field">
          <label>&nbsp;</label>
          <button class="btn" id="btnClearFilters">ğŸ§¹ Reset filtre</button>
        </div>
      </div>

      <div class="row small">
        <div class="hint" id="notifHint">ğŸ”” NotificÄƒrile sunt dezactivate.</div>
        <div class="spacer"></div>
        <div class="hint" id="countHint">0 rezultate</div>
      </div>
    </section>

    <!-- TABLE -->
    <section class="panel table-wrap" aria-label="ListÄƒ facturi">
      <div class="table-head">
        <div>
          <h2>Facturi</h2>
          <div class="muted">GestionaÈ›i trimiterea È™i Ã®ncasarea facturilor, pe magazine/locaÈ›ii.</div>
        </div>
        <div class="table-actions">
          <button class="btn" id="btnMarkSendToday">ğŸ“¤ MarcheazÄƒ â€Trimis aziâ€ (selectate)</button>
          <button class="btn" id="btnMarkPaidToday">ğŸ’³ MarcheazÄƒ â€PlÄƒtit aziâ€ (selectate)</button>
          <button class="btn btn-danger" id="btnDeleteSelected">ğŸ—‘ï¸ È˜terge selectate</button>
        </div>
      </div>

      <div class="table-scroll" role="region" aria-label="Tabel facturi">
        <table class="table" id="invoiceTable">
          <thead>
            <tr>
              <th class="col-check">
                <input type="checkbox" id="checkAll" aria-label="SelecteazÄƒ toate" />
              </th>
              <th>FacturÄƒ</th>
              <th>Client</th>
              <th>Magazin</th>
              <th>LocaÈ›ie</th>
              <th>SumÄƒ</th>
              <th>Trimitere</th>
              <th>ScadenÈ›Äƒ</th>
              <th>Status</th>
              <th class="col-actions">AcÈ›iuni</th>
            </tr>
          </thead>
          <tbody id="invoiceTbody">
            <!-- randuri din JS -->
          </tbody>
        </table>
      </div>

      <div class="empty" id="emptyState" hidden>
        <div class="empty-card">
          <div class="empty-ico">ğŸ§¾</div>
          <div class="empty-title">Nu existÄƒ facturi Ã®ncÄƒ</div>
          <div class="empty-sub">AdÄƒugaÈ›i prima facturÄƒ È™i Ã®ncepeÈ›i evidenÈ›a.</div>
          <button class="btn" id="btnAddInvoiceEmpty">â• AdaugÄƒ facturÄƒ</button>
        </div>
      </div>
    </section>

    <!-- TOAST HOST -->
    <div class="toasts" id="toastHost" aria-live="polite" aria-atomic="true"></div>
  </div>

  <!-- MODAL: INVOICE -->
  <div class="modal" id="modalInvoice" aria-hidden="true" role="dialog" aria-modal="true" aria-label="FacturÄƒ">
    <div class="modal-card">
      <div class="modal-head">
        <div>
          <div class="modal-title" id="modalInvoiceTitle">FacturÄƒ</div>
          <div class="modal-sub">CompletaÈ›i datele facturii È™i programarea trimiterii.</div>
        </div>
        <button class="iconbtn" id="btnCloseInvoice" aria-label="Ãnchide">âœ•</button>
      </div>

      <form id="invoiceForm" class="modal-body">
        <input type="hidden" id="invoiceId" />

        <div class="grid2">
          <div class="field">
            <label for="invNumber">NumÄƒr facturÄƒ *</label>
            <input id="invNumber" required placeholder="ex: LDF-2026-001" />
          </div>
          <div class="field">
            <label for="invClient">Client *</label>
            <input id="invClient" required placeholder="ex: SC Exemplu SRL" />
          </div>
        </div>

        <div class="grid3">
          <div class="field">
            <label for="invIssueDate">Data emitere *</label>
            <input id="invIssueDate" type="date" required />
          </div>
          <div class="field">
            <label for="invSendDate">Data trimitere (notificare) *</label>
            <input id="invSendDate" type="date" required />
          </div>
          <div class="field">
            <label for="invDueDate">Data scadenÈ›Äƒ *</label>
            <input id="invDueDate" type="date" required />
          </div>
        </div>

        <div class="grid3">
          <div class="field">
            <label for="invAmount">SumÄƒ (RON) *</label>
            <input id="invAmount" type="number" min="0" step="0.01" required placeholder="ex: 1250.50" />
          </div>
          <div class="field">
            <label for="invShop">Magazin *</label>
            <select id="invShop" required></select>
          </div>
          <div class="field">
            <label for="invLocation">LocaÈ›ie *</label>
            <select id="invLocation" required></select>
          </div>
        </div>

        <div class="grid2">
          <div class="field">
            <label for="invSent">TrimisÄƒ?</label>
            <select id="invSent">
              <option value="no">Nu</option>
              <option value="yes">Da</option>
            </select>
          </div>
          <div class="field">
            <label for="invPaid">PlÄƒtitÄƒ?</label>
            <select id="invPaid">
              <option value="no">Nu</option>
              <option value="yes">Da</option>
            </select>
          </div>
        </div>

        <div class="grid2" id="paidRow" hidden>
          <div class="field">
            <label for="invPaidDate">Data Ã®ncasÄƒrii</label>
            <input id="invPaidDate" type="date" />
          </div>
          <div class="field">
            <label for="invPaidRef">ReferinÈ›Äƒ Ã®ncasare (opÈ›ional)</label>
            <input id="invPaidRef" placeholder="ex: OP #12345 / tranzacÈ›ie" />
          </div>
        </div>

        <div class="field">
          <label for="invNotes">Note (opÈ›ional)</label>
          <textarea id="invNotes" rows="3" placeholder="ObservaÈ›ii..."></textarea>
        </div>

        <div class="modal-foot">
          <div class="left">
            <button type="button" class="btn btn-ghost" id="btnDeleteInvoice" hidden>ğŸ—‘ï¸ È˜terge</button>
          </div>
          <div class="right">
            <button type="button" class="btn btn-ghost" id="btnCancelInvoice">AnuleazÄƒ</button>
            <button type="submit" class="btn btn-primary" id="btnSaveInvoice">SalveazÄƒ</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <!-- MODAL: CATEGORY -->
  <div class="modal" id="modalCategory" aria-hidden="true" role="dialog" aria-modal="true" aria-label="Categorie">
    <div class="modal-card">
      <div class="modal-head">
        <div>
          <div class="modal-title">Categorii</div>
          <div class="modal-sub">GestionaÈ›i listele de Magazine È™i LocaÈ›ii.</div>
        </div>
        <button class="iconbtn" id="btnCloseCategory" aria-label="Ãnchide">âœ•</button>
      </div>

      <div class="modal-body">
        <div class="grid2">
          <div class="panel mini">
            <div class="mini-head">
              <div class="mini-title">Magazine</div>
              <div class="mini-actions">
                <input id="newShopName" placeholder="AdaugÄƒ magazin..." />
                <button class="btn" id="btnAddShop">â•</button>
              </div>
            </div>
            <ul class="list" id="shopList"></ul>
          </div>

          <div class="panel mini">
            <div class="mini-head">
              <div class="mini-title">LocaÈ›ii</div>
              <div class="mini-actions">
                <input id="newLocationName" placeholder="AdaugÄƒ locaÈ›ie..." />
                <button class="btn" id="btnAddLocation">â•</button>
              </div>
            </div>
            <ul class="list" id="locationList"></ul>
          </div>
        </div>

        <div class="modal-foot">
          <div class="left muted">NotÄƒ: nu puteÈ›i È™terge o categorie folositÄƒ de facturi.</div>
          <div class="right">
            <button class="btn btn-primary" id="btnDoneCategory">Gata</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="lucidatafact.js"></script>
</body>
</html>
